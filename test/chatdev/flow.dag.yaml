desc: "ChatDev Agent - one sentence demand to generate web page."

outputs:
  reference: ${TestModification}

roles:
  - name: "Chief Product Officer"
    source:
      path: Role_Chief_Product_Officer
  - name: "Counselor"
    source:
      path: Role_Counselor
  - name: "Chief Technology Officer"
    source:
      path: Role_Chief_Technology_Officer
  - name: "Chief Human Resource Officer"
    source:
      path: Role_Chief_Human_Resource_Officer
  - name: "Programmer"
    source:
      path: Role_Programmer
  - name: "Code Reviewer"
    source:
      path: Role_Code_Reviewer
  - name: "Software Test Engineer"
    source:
      path: Role_Software_Test_Engineer
  - name: "Chief Creative Officer"
    source:
      path: Role_Chief_Creative_Officer

nodes:
  - name: DemandUnderstand
    source:
      path: Planning_Prompt_Enhance
      func: Func_Prompt_Enhance
    inputs:
      task: ${inputs.input_text}

  - name: Coding
    role: "Programmer"
    source:
      path: Planning_Coding
      func: Func_Coding
    inputs:
      gui: ${DemandUnderstand.gui}
      ideas: ${DemandUnderstand.ideas}
      language: ${DemandUnderstand.language}
      modality: ${DemandUnderstand.modality}
      task: ${DemandUnderstand.task}

  - name: CodeComplete
    role: "Programmer"
    source:
      path: Planning_CodeComplete
      func: Func_Coding
    inputs:
      unimplemented_file: ${Coding.unimplemented_file}
      codes: ${Coding.output}
      language: ${DemandUnderstand.language}
      modality: ${DemandUnderstand.modality}
      task: ${DemandUnderstand.task}

  - name: CodeReviewComment
    role: "Code Reviewer"
    source:
      path: Planning_CodeReviewComment
    inputs:
      codes: ${CodeComplete.output}
      ideas: ${DemandUnderstand.ideas}
      language: ${DemandUnderstand.language}
      modality: ${DemandUnderstand.modality}
      task: ${DemandUnderstand.task}

  - name: CodeReviewModification
    role: "Code Reviewer"
    source:
      path: Planning_CodeReviewModification
      func: Func_Coding
    inputs:
      comments: ${CodeReviewComment.output}
      codes: ${CodeComplete.output}
      ideas: ${DemandUnderstand.ideas}
      language: ${DemandUnderstand.language}
      modality: ${DemandUnderstand.modality}
      task: ${DemandUnderstand.task}

  - name: TestErrorSummary
    role: "Programmer"
    source:
      path: Planning_TestErrorSummary
    inputs:
      test_reports: "js & css should inline in index.html"
      codes: ${CodeReviewModification.output}
      language: ${DemandUnderstand.language}

  - name: TestModification
    role: "Programmer"
    source:
      path: Planning_TestModification
      func: Func_Coding
    inputs:
      error_summary: ${TestErrorSummary.output}
      test_reports: ${TestErrorSummary.output}
      codes: ${CodeReviewModification.output}
      language: ${DemandUnderstand.language}

